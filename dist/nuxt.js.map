{"version":3,"file":"nuxt.js","sources":["../lib/common/utils.js","../lib/common/options.js","../lib/core/module.js","../lib/core/meta.js","../lib/core/renderer.js","../lib/core/nuxt.js","../lib/builder/webpack/base.config.js","../lib/builder/webpack/client.config.js","../lib/builder/webpack/server.config.js","../lib/builder/webpack/dll.config.js","../lib/builder/webpack/vue-loader.config.js","../lib/builder/webpack/style-loader.js","../lib/builder/builder.js","../lib/builder/generator.js","../lib/index.js"],"sourcesContent":["import { resolve, relative, sep } from 'path'\nimport _ from 'lodash'\n\nexport function encodeHtml (str) {\n  return str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n}\n\nexport function getContext (req, res) {\n  return { req, res }\n}\n\nexport function setAnsiColors (ansiHTML) {\n  ansiHTML.setColors({\n    reset: ['efefef', 'a6004c'],\n    darkgrey: '5a012b',\n    yellow: 'ffab07',\n    green: 'aeefba',\n    magenta: 'ff84bf',\n    blue: '3505a0',\n    cyan: '56eaec',\n    red: '4e053a'\n  })\n}\n\nexport async function waitFor (ms) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, (ms || 0))\n  })\n}\n\nexport function urlJoin () {\n  return [].slice.call(arguments).join('/').replace(/\\/+/g, '/').replace(':/', '://')\n}\n\nexport function isUrl (url) {\n  return (url.indexOf('http') === 0 || url.indexOf('//') === 0)\n}\n\nexport function promisifyRoute (fn) {\n  // If routes is an array\n  if (Array.isArray(fn)) {\n    return Promise.resolve(fn)\n  }\n  // If routes is a function expecting a callback\n  if (fn.length === 1) {\n    return new Promise((resolve, reject) => {\n      fn(function (err, routeParams) {\n        if (err) {\n          reject(err)\n        }\n        resolve(routeParams)\n      })\n    })\n  }\n  let promise = fn()\n  if (!promise || (!(promise instanceof Promise) && (typeof promise.then !== 'function'))) {\n    promise = Promise.resolve(promise)\n  }\n  return promise\n}\n\nexport function sequence (tasks, fn) {\n  return tasks.reduce((promise, task) => promise.then(() => fn(task)), Promise.resolve())\n}\n\nexport function parallel (tasks, fn) {\n  return Promise.all(tasks.map(task => fn(task)))\n}\n\nexport function chainFn (base, fn) {\n  /* istanbul ignore if */\n  if (!(fn instanceof Function)) {\n    return\n  }\n  return function () {\n    if (typeof base !== 'function') {\n      return fn.apply(this, arguments)\n    }\n    let baseResult = base.apply(this, arguments)\n    // Allow function to mutate the first argument instead of returning the result\n    if (baseResult === undefined) {\n      baseResult = arguments[0]\n    }\n    let fnResult = fn.call(this, baseResult, ...Array.prototype.slice.call(arguments, 1))\n    // Return mutated argument if no result was returned\n    if (fnResult === undefined) {\n      return baseResult\n    }\n    return fnResult\n  }\n}\n\nexport function isPureObject (o) {\n  return !Array.isArray(o) && typeof o === 'object'\n}\n\nexport const isWindows = /^win/.test(process.platform)\n\nexport function wp (p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\\\/g, '\\\\\\\\')\n  }\n  return p\n}\n\nexport function wChunk (p = '') {\n  /* istanbul ignore if */\n  if (isWindows) {\n    return p.replace(/\\//g, '\\\\\\\\')\n  }\n  return p\n}\n\nconst reqSep = /\\//g\nconst sysSep = _.escapeRegExp(sep)\nconst normalize = string => string.replace(reqSep, sysSep)\n\nexport function r () {\n  let args = Array.prototype.slice.apply(arguments)\n  let lastArg = _.last(args)\n\n  if (lastArg.includes('@') || lastArg.includes('~')) {\n    return wp(lastArg)\n  }\n\n  return wp(resolve(...args.map(normalize)))\n}\n\nexport function relativeTo () {\n  let args = Array.prototype.slice.apply(arguments)\n  let dir = args.shift()\n\n  // Resolve path\n  let path = r(...args)\n\n  // Check if path is an alias\n  if (path.includes('@') || path.includes('~')) {\n    return path\n  }\n\n  // Make correct relative path\n  let rp = relative(dir, path)\n  if (rp[0] !== '.') {\n    rp = './' + rp\n  }\n  return wp(rp)\n}\n\nexport function flatRoutes (router, path = '', routes = []) {\n  router.forEach((r) => {\n    if (!r.path.includes(':') && !r.path.includes('*')) {\n      /* istanbul ignore if */\n      if (r.children) {\n        flatRoutes(r.children, path + r.path + '/', routes)\n      } else {\n        routes.push((r.path === '' && path[path.length - 1] === '/' ? path.slice(0, -1) : path) + r.path)\n      }\n    }\n  })\n  return routes\n}\n\nexport function cleanChildrenRoutes (routes, isChild = false) {\n  let start = -1\n  let routesIndex = []\n  routes.forEach((route) => {\n    if (/-index$/.test(route.name) || route.name === 'index') {\n      // Save indexOf 'index' key in name\n      let res = route.name.split('-')\n      let s = res.indexOf('index')\n      start = (start === -1 || s < start) ? s : start\n      routesIndex.push(res)\n    }\n  })\n  routes.forEach((route) => {\n    route.path = (isChild) ? route.path.replace('/', '') : route.path\n    if (route.path.indexOf('?') > -1) {\n      let names = route.name.split('-')\n      let paths = route.path.split('/')\n      if (!isChild) {\n        paths.shift()\n      } // clean first / for parents\n      routesIndex.forEach((r) => {\n        let i = r.indexOf('index') - start //  children names\n        if (i < paths.length) {\n          for (let a = 0; a <= i; a++) {\n            if (a === i) {\n              paths[a] = paths[a].replace('?', '')\n            }\n            if (a < i && names[a] !== r[a]) {\n              break\n            }\n          }\n        }\n      })\n      route.path = (isChild ? '' : '/') + paths.join('/')\n    }\n    route.name = route.name.replace(/-index$/, '')\n    if (route.children) {\n      if (route.children.find((child) => child.path === '')) {\n        delete route.name\n      }\n      route.children = cleanChildrenRoutes(route.children, true)\n    }\n  })\n  return routes\n}\n\nexport function createRoutes (files, srcDir) {\n  let routes = []\n  files.forEach((file) => {\n    let keys = file.replace(/^pages/, '').replace(/\\.vue$/, '').replace(/\\/{2,}/g, '/').split('/').slice(1)\n    let route = { name: '', path: '', component: r(srcDir, file) }\n    let parent = routes\n    keys.forEach((key, i) => {\n      route.name = route.name ? route.name + '-' + key.replace('_', '') : key.replace('_', '')\n      route.name += (key === '_') ? 'all' : ''\n      route.chunkName = file.replace(/\\.vue$/, '')\n      let child = _.find(parent, { name: route.name })\n      if (child) {\n        child.children = child.children || []\n        parent = child.children\n        route.path = ''\n      } else {\n        if (key === 'index' && (i + 1) === keys.length) {\n          route.path += (i > 0 ? '' : '/')\n        } else {\n          route.path += '/' + (key === '_' ? '*' : key.replace('_', ':'))\n          if (key !== '_' && key.indexOf('_') !== -1) {\n            route.path += '?'\n          }\n        }\n      }\n    })\n    // Order Routes path\n    parent.push(route)\n    parent.sort((a, b) => {\n      if (!a.path.length || a.path === '/') {\n        return -1\n      }\n      if (!b.path.length || b.path === '/') {\n        return 1\n      }\n      let i = 0\n      let res = 0\n      let y = 0\n      let z = 0\n      const _a = a.path.split('/')\n      const _b = b.path.split('/')\n      for (i = 0; i < _a.length; i++) {\n        if (res !== 0) {\n          break\n        }\n        y = _a[i] === '*' ? 2 : (_a[i].indexOf(':') > -1 ? 1 : 0)\n        z = _b[i] === '*' ? 2 : (_b[i].indexOf(':') > -1 ? 1 : 0)\n        res = y - z\n        // If a.length >= b.length\n        if (i === _b.length - 1 && res === 0) {\n          // change order if * found\n          res = _a[i] === '*' ? -1 : 1\n        }\n      }\n      return res === 0 ? (_a[i - 1] === '*' && _b[i] ? 1 : -1) : res\n    })\n  })\n  return cleanChildrenRoutes(routes)\n}\n","import _ from 'lodash'\nimport { join, resolve } from 'path'\nimport { existsSync } from 'fs'\nimport { isUrl, isPureObject } from 'utils'\n\nconst Options = {}\n\nexport default Options\n\nOptions.from = function (_options) {\n  // Clone options to prevent unwanted side-effects\n  const options = Object.assign({}, _options)\n\n  // Normalize options\n  if (options.loading === true) {\n    delete options.loading\n  }\n  if (options.router && typeof options.router.middleware === 'string') {\n    options.router.middleware = [options.router.middleware]\n  }\n  if (options.router && typeof options.router.base === 'string') {\n    options._routerBaseSpecified = true\n  }\n  if (typeof options.transition === 'string') {\n    options.transition = { name: options.transition }\n  }\n  if (typeof options.layoutTransition === 'string') {\n    options.layoutTransition = { name: options.layoutTransition }\n  }\n\n  // Apply defaults\n  _.defaultsDeep(options, Options.defaults)\n\n  // Resolve dirs\n  const hasValue = v => typeof v === 'string' && v\n  options.rootDir = hasValue(options.rootDir) ? options.rootDir : process.cwd()\n  options.srcDir = hasValue(options.srcDir) ? resolve(options.rootDir, options.srcDir) : options.rootDir\n  options.modulesDir = resolve(options.rootDir, hasValue(options.modulesDir) ? options.modulesDir : 'node_modules')\n  options.buildDir = resolve(options.rootDir, options.buildDir)\n  options.cacheDir = resolve(options.rootDir, options.cacheDir)\n\n  // If app.html is defined, set the template path to the user template\n  options.appTemplatePath = resolve(options.buildDir, 'views/app.template.html')\n  if (existsSync(join(options.srcDir, 'app.html'))) {\n    options.appTemplatePath = join(options.srcDir, 'app.html')\n  }\n\n  // Ignore publicPath on dev\n  /* istanbul ignore if */\n  if (options.dev && isUrl(options.build.publicPath)) {\n    options.build.publicPath = Options.defaults.build.publicPath\n  }\n\n  // If store defined, update store options to true unless explicitly disabled\n  if (options.store !== false && existsSync(join(options.srcDir, 'store'))) {\n    options.store = true\n  }\n\n  // Normalize loadingIndicator\n  if (!isPureObject(options.loadingIndicator)) {\n    options.loadingIndicator = { name: options.loadingIndicator }\n  }\n\n  // Apply defaults to loadingIndicator\n  options.loadingIndicator = Object.assign({\n    name: 'pulse',\n    color: '#dbe1ec',\n    background: 'white'\n  }, options.loadingIndicator)\n\n  // cssSourceMap\n  if (options.build.cssSourceMap === undefined) {\n    options.build.cssSourceMap = options.dev\n  }\n\n  // Postcss\n  // 1. Check if it is explicitly disabled by false value\n  // ... Disable all postcss loaders\n  // 2. Check if any standard source of postcss config exists\n  // ... Make postcss = true letting loaders find this kind of config\n  // 3. Else (Easy Usage)\n  // ... Auto merge it with defaults\n  if (options.build.postcss !== false) {\n    // Detect postcss config existence\n    // https://github.com/michael-ciniawsky/postcss-load-config\n    let postcssConfigExists = false\n    for (let dir of [options.srcDir, options.rootDir]) {\n      for (let file of ['postcss.config.js', '.postcssrc.js', '.postcssrc', '.postcssrc.json', '.postcssrc.yaml']) {\n        if (existsSync(resolve(dir, file))) {\n          postcssConfigExists = true\n          break\n        }\n      }\n      if (postcssConfigExists) break\n    }\n\n    // Default postcss options\n    if (postcssConfigExists) {\n      options.build.postcss = true\n    }\n\n    // Normalize & Apply default plugins\n    if (Array.isArray(options.build.postcss)) {\n      options.build.postcss = { plugins: options.build.postcss }\n    }\n    if (isPureObject(options.build.postcss)) {\n      options.build.postcss = Object.assign({\n        sourceMap: options.build.cssSourceMap,\n        plugins: {\n          // https://github.com/postcss/postcss-import\n          'postcss-import': {\n            root: options.rootDir,\n            path: [\n              options.srcDir,\n              options.rootDir,\n              options.modulesDir\n            ]\n          },\n          // https://github.com/postcss/postcss-url\n          'postcss-url': {},\n          // http://cssnext.io/postcss\n          'postcss-cssnext': {}\n        }\n      }, options.build.postcss)\n    }\n  }\n\n  // Debug errors\n  if (options.debug === undefined) {\n    options.debug = options.dev\n  }\n\n  // Apply mode preset\n  let modePreset = Options.modes[options.mode || 'universal'] || Options.modes['universal']\n  _.defaultsDeep(options, modePreset)\n\n  // If no server-side rendering, add appear true transition\n  if (options.render.ssr === false) {\n    options.transition.appear = true\n  }\n\n  return options\n}\n\nOptions.modes = {\n  universal: {\n    build: {\n      ssr: true\n    },\n    render: {\n      ssr: true\n    }\n  },\n  spa: {\n    build: {\n      ssr: false\n    },\n    render: {\n      ssr: false\n    }\n  }\n}\n\nOptions.defaults = {\n  mode: 'universal',\n  dev: process.env.NODE_ENV !== 'production',\n  debug: undefined, // Will be equal to dev if not provided\n  buildDir: '.nuxt',\n  cacheDir: '.cache',\n  nuxtAppDir: resolve(__dirname, '../lib/app/'), // Relative to dist\n  build: {\n    analyze: false,\n    dll: false,\n    extractCSS: false,\n    cssSourceMap: undefined,\n    ssr: undefined,\n    publicPath: '/_nuxt/',\n    filenames: {\n      css: 'common.[contenthash].css',\n      manifest: 'manifest.[hash].js',\n      vendor: 'common.[chunkhash].js',\n      app: 'app.[chunkhash].js',\n      chunk: '[name].[chunkhash].js'\n    },\n    vendor: [],\n    plugins: [],\n    babel: {},\n    postcss: {},\n    templates: [],\n    watch: [],\n    devMiddleware: {},\n    hotMiddleware: {}\n  },\n  generate: {\n    dir: 'dist',\n    routes: [],\n    concurrency: 500,\n    interval: 0,\n    minify: {\n      collapseBooleanAttributes: true,\n      collapseWhitespace: true,\n      decodeEntities: true,\n      minifyCSS: true,\n      minifyJS: true,\n      processConditionalComments: true,\n      removeAttributeQuotes: false,\n      removeComments: false,\n      removeEmptyAttributes: true,\n      removeOptionalTags: true,\n      removeRedundantAttributes: true,\n      removeScriptTypeAttributes: false,\n      removeStyleLinkTypeAttributes: false,\n      removeTagWhitespace: false,\n      sortAttributes: true,\n      sortClassName: false,\n      trimCustomFragments: true,\n      useShortDoctype: true\n    }\n  },\n  env: {},\n  head: {\n    meta: [],\n    link: [],\n    style: [],\n    script: []\n  },\n  plugins: [],\n  css: [],\n  modules: [],\n  layouts: {},\n  serverMiddleware: [],\n  ErrorPage: null,\n  loading: {\n    color: 'black',\n    failedColor: 'red',\n    height: '2px',\n    duration: 5000,\n    rtl: false\n  },\n  loadingIndicator: {},\n  transition: {\n    name: 'page',\n    mode: 'out-in',\n    appear: false,\n    appearClass: 'appear',\n    appearActiveClass: 'appear-active',\n    appearToClass: 'appear-to'\n  },\n  layoutTransition: {\n    name: 'layout',\n    mode: 'out-in'\n  },\n  router: {\n    mode: 'history',\n    base: '/',\n    routes: [],\n    middleware: [],\n    linkActiveClass: 'nuxt-link-active',\n    linkExactActiveClass: 'nuxt-link-exact-active',\n    extendRoutes: null,\n    scrollBehavior: null,\n    fallback: false\n  },\n  render: {\n    bundleRenderer: {},\n    resourceHints: true,\n    ssr: undefined,\n    http2: {\n      push: false\n    },\n    static: {},\n    gzip: {\n      threshold: 0\n    },\n    etag: {\n      weak: true // Faster for responses > 5KB\n    }\n  },\n  watchers: {\n    webpack: {\n      ignored: /-dll/\n    },\n    chokidar: {}\n  },\n  editor: {\n    editor: 'code'\n  },\n  messages: {\n    error_404: 'This page could not be found',\n    server_error: 'Server error',\n    nuxtjs: 'Nuxt.js',\n    back_to_home: 'Back to the home page',\n    server_error_details: 'An error occurred in the application and your page could not be served. If you are the application owner, check your logs for details.',\n    client_error: 'Error',\n    client_error_details: 'An error occurred while rendering the page. Check developer tools console for details.'\n  }\n}\n","import path from 'path'\nimport fs from 'fs'\nimport { uniq } from 'lodash'\nimport hash from 'hash-sum'\nimport Tapable from 'tappable'\nimport { chainFn, sequence } from 'utils'\nimport Debug from 'debug'\n\nconst debug = Debug('nuxt:module')\n\nexport default class ModuleContainer extends Tapable {\n  constructor (nuxt) {\n    super()\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.requiredModules = []\n  }\n\n  async _ready () {\n    await sequence(this.options.modules, this.addModule.bind(this))\n    await this.applyPluginsAsync('ready', this)\n  }\n\n  addVendor (vendor) {\n    /* istanbul ignore if */\n    if (!vendor) {\n      return\n    }\n    this.options.build.vendor = uniq(this.options.build.vendor.concat(vendor))\n  }\n\n  addTemplate (template) {\n    /* istanbul ignore if */\n    if (!template) {\n      return\n    }\n    // Validate & parse source\n    const src = template.src || template\n    const srcPath = path.parse(src)\n    /* istanbul ignore if */\n    if (!src || typeof src !== 'string' || !fs.existsSync(src)) {\n      /* istanbul ignore next */\n      debug('[nuxt] invalid template', template)\n      return\n    }\n    // Generate unique and human readable dst filename\n    const dst = template.fileName ||\n      (path.basename(srcPath.dir) + '.' + srcPath.name + '.' + hash(src) + srcPath.ext)\n    // Add to templates list\n    const templateObj = {\n      src,\n      dst,\n      options: template.options\n    }\n    this.options.build.templates.push(templateObj)\n    return templateObj\n  }\n\n  addPlugin (template) {\n    const { dst } = this.addTemplate(template)\n    // Add to nuxt plugins\n    this.options.plugins.unshift({\n      src: path.join(this.options.buildDir, dst),\n      ssr: template.ssr\n    })\n  }\n\n  addServerMiddleware (middleware) {\n    this.options.serverMiddleware.push(middleware)\n  }\n\n  extendBuild (fn) {\n    this.options.build.extend = chainFn(this.options.build.extend, fn)\n  }\n\n  extendRoutes (fn) {\n    this.options.router.extendRoutes = chainFn(this.options.router.extendRoutes, fn)\n  }\n\n  requireModule (moduleOpts) {\n    // Require once\n    return this.addModule(moduleOpts, true)\n  }\n\n  async addModule (moduleOpts, requireOnce) {\n    /* istanbul ignore if */\n    if (!moduleOpts) {\n      return\n    }\n\n    await this.applyPluginsAsync('add', {moduleOpts, requireOnce})\n\n    // Allow using babel style array options\n    if (Array.isArray(moduleOpts)) {\n      moduleOpts = {\n        src: moduleOpts[0],\n        options: moduleOpts[1]\n      }\n    }\n\n    // Allows passing runtime options to each module\n    const options = moduleOpts.options || (typeof moduleOpts === 'object' ? moduleOpts : {})\n    const originalSrc = moduleOpts.src || moduleOpts\n\n    // Resolve module\n    let module = originalSrc\n    if (typeof module === 'string') {\n      module = require(this.nuxt.resolvePath(module))\n    }\n\n    // Validate module\n    /* istanbul ignore if */\n    if (typeof module !== 'function') {\n      throw new Error(`[nuxt] Module ${JSON.stringify(originalSrc)} should export a function`)\n    }\n\n    // Module meta\n    if (!module.meta) {\n      module.meta = {}\n    }\n    if (module.meta.name) {\n      const alreadyRequired = this.requiredModules.indexOf(module.meta.name) !== -1\n      if (requireOnce && alreadyRequired) {\n        return\n      }\n      if (!alreadyRequired) {\n        this.requiredModules.push(module.meta.name)\n      }\n    }\n\n    // Call module with `this` context and pass options\n    return new Promise((resolve, reject) => {\n      const result = module.call(this, options, err => {\n        /* istanbul ignore if */\n        if (err) {\n          return reject(err)\n        }\n        resolve(module)\n      })\n      // If module send back a promise\n      if (result && result.then instanceof Function) {\n        return result.then(resolve)\n      }\n      // If not expecting a callback but returns no promise (=synchronous)\n      if (module.length < 2) {\n        return resolve(module)\n      }\n    })\n  }\n}\n","\nimport Vue from 'vue'\nimport VueMeta from 'vue-meta'\nimport VueServerRenderer from 'vue-server-renderer'\nimport LRU from 'lru-cache'\n\nexport default class MetaRenderer {\n  constructor (nuxt, renderer) {\n    this.nuxt = nuxt\n    this.renderer = renderer\n    this.options = nuxt.options\n    this.vueRenderer = VueServerRenderer.createRenderer()\n    this.cache = LRU({})\n\n    // Add VueMeta to Vue (this is only for SPA mode)\n    // See lib/app/index.js\n    Vue.use(VueMeta, {\n      keyName: 'head',\n      attribute: 'data-n-head',\n      ssrAttribute: 'data-n-head-ssr',\n      tagIDKeyName: 'hid'\n    })\n  }\n\n  getMeta (url) {\n    return new Promise((resolve, reject) => {\n      const vm = new Vue({\n        render: (h) => h(), // Render empty html tag\n        head: this.options.head || {}\n      })\n      this.vueRenderer.renderToString(vm, (err) => {\n        if (err) return reject(err)\n        resolve(vm.$meta().inject())\n      })\n    })\n  }\n\n  async render ({ url = '/' }) {\n    let meta = this.cache.get(url)\n\n    if (meta) {\n      return meta\n    }\n\n    meta = {\n      HTML_ATTRS: '',\n      BODY_ATTRS: '',\n      HEAD: ''\n    }\n    // Get vue-meta context\n    const m = await this.getMeta(url)\n    // HTML_ATTRS\n    meta.HTML_ATTRS = m.htmlAttrs.text()\n    // BODY_ATTRS\n    meta.BODY_ATTRS = m.bodyAttrs.text()\n    // HEAD tags\n    meta.HEAD = m.meta.text() + m.title.text() + m.link.text() + m.style.text() + m.script.text() + m.noscript.text()\n    // Resources Hints\n    meta.resourceHints = ''\n    // Resource Hints\n    const clientManifest = this.renderer.resources.clientManifest\n    if (this.options.render.resourceHints && clientManifest) {\n      const publicPath = clientManifest.publicPath || '/_nuxt/'\n      // Pre-Load initial resources\n      if (Array.isArray(clientManifest.initial)) {\n        meta.resourceHints += clientManifest.initial.map(r => `<link rel=\"preload\" href=\"${publicPath}${r}\" as=\"script\" />`).join('')\n      }\n      // Pre-Fetch async resources\n      if (Array.isArray(clientManifest.async)) {\n        meta.resourceHints += clientManifest.async.map(r => `<link rel=\"prefetch\" href=\"${publicPath}${r}\" />`).join('')\n      }\n      // Add them to HEAD\n      if (meta.resourceHints) {\n        meta.HEAD += meta.resourceHints\n      }\n    }\n\n    // Set meta tags inside cache\n    this.cache.set(url, meta)\n\n    return meta\n  }\n}\n","import ansiHTML from 'ansi-html'\nimport serialize from 'serialize-javascript'\nimport generateETag from 'etag'\nimport fresh from 'fresh'\nimport Tapable from 'tappable'\nimport pify from 'pify'\nimport serveStatic from 'serve-static'\nimport compression from 'compression'\nimport _ from 'lodash'\nimport { join, resolve } from 'path'\nimport fs from 'fs-extra'\nimport { createBundleRenderer } from 'vue-server-renderer'\nimport { getContext, setAnsiColors, isUrl } from 'utils'\nimport Debug from 'debug'\nimport Youch from '@nuxtjs/youch'\nimport { SourceMapConsumer } from 'source-map'\nimport connect from 'connect'\nimport { Options } from 'common'\nimport MetaRenderer from './meta'\n\nconst debug = Debug('nuxt:render')\ndebug.color = 4 // Force blue color\n\nsetAnsiColors(ansiHTML)\n\nlet jsdom = null\n\nexport default class Renderer extends Tapable {\n  constructor (nuxt) {\n    super()\n    this.nuxt = nuxt\n    this.options = nuxt.options\n\n    // Will be set by createRenderer\n    this.bundleRenderer = null\n    this.metaRenderer = null\n\n    // Will be available on dev\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n\n    // Create new connect instance\n    this.app = connect()\n\n    // Renderer runtime resources\n    this.resources = {\n      clientManifest: null,\n      serverBundle: null,\n      ssrTemplate: null,\n      spaTemplate: null,\n      errorTemplate: parseTemplate('Nuxt.js Internal Server Error')\n    }\n  }\n\n  async _ready () {\n    await this.nuxt.applyPluginsAsync('renderer', this)\n\n    // Setup nuxt middleware\n    await this.setupMiddleware()\n\n    // Load SSR resources from fs\n    if (!this.options.dev) {\n      await this.loadResources()\n    }\n\n    // Call ready plugin\n    await this.applyPluginsAsync('ready', this)\n  }\n\n  async loadResources (_fs = fs) {\n    let distPath = resolve(this.options.buildDir, 'dist')\n    let updated = []\n\n    resourceMap.forEach(({ key, fileName, transform }) => {\n      let rawKey = '$$' + key\n      const path = join(distPath, fileName)\n\n      let rawData, data\n      if (!_fs.existsSync(path)) {\n        return // Resource not exists\n      }\n      rawData = _fs.readFileSync(path, 'utf8')\n      if (!rawData || rawData === this.resources[rawKey]) {\n        return // No changes\n      }\n      this.resources[rawKey] = rawData\n      data = transform(rawData)\n      /* istanbul ignore if */\n      if (!data) {\n        return // Invalid data ?\n      }\n      this.resources[key] = data\n      updated.push(key)\n    })\n\n    // Reload error template\n    const errorTemplatePath = resolve(this.options.buildDir, 'views/error.html')\n    if (fs.existsSync(errorTemplatePath)) {\n      this.resources.errorTemplate = parseTemplate(fs.readFileSync(errorTemplatePath, 'utf8'))\n    }\n\n    // Load loading template\n    const loadingHTMLPath = resolve(this.options.buildDir, 'loading.html')\n    if (fs.existsSync(loadingHTMLPath)) {\n      this.resources.loadingHTML = fs.readFileSync(loadingHTMLPath, 'utf8')\n      this.resources.loadingHTML = this.resources.loadingHTML.replace(/[\\r|\\n]/g, '')\n    } else {\n      this.resources.loadingHTML = ''\n    }\n\n    // Call resourcesLoaded plugin\n    await this.applyPluginsAsync('resourcesLoaded', this.resources)\n\n    if (updated.length > 0) {\n      // debug('Updated', updated.join(', '), isServer)\n      this.createRenderer()\n    }\n  }\n\n  get noSSR () {\n    return this.options.render.ssr === false\n  }\n\n  get isReady () {\n    if (this.noSSR) {\n      return Boolean(this.resources.spaTemplate)\n    }\n\n    return Boolean(this.bundleRenderer && this.resources.ssrTemplate)\n  }\n\n  get isResourcesAvailable () {\n    // Required for both\n    if (!this.resources.clientManifest) {\n      return false\n    }\n\n    // Required for SPA rendering\n    if (this.noSSR) {\n      return Boolean(this.resources.spaTemplate)\n    }\n\n    // Required for bundle renderer\n    return Boolean(this.resources.ssrTemplate && this.resources.serverBundle)\n  }\n\n  createRenderer () {\n    // Ensure resources are available\n    if (!this.isResourcesAvailable) {\n      return\n    }\n\n    // Create Meta Renderer\n    this.metaRenderer = new MetaRenderer(this.nuxt, this)\n\n    // Show Open URL\n    this.nuxt.showOpen()\n\n    // Skip following steps if noSSR mode\n    if (this.noSSR) {\n      return\n    }\n\n    // Create bundle renderer for SSR\n    this.bundleRenderer = createBundleRenderer(this.resources.serverBundle, Object.assign({\n      clientManifest: this.resources.clientManifest,\n      runInNewContext: false,\n      basedir: this.options.rootDir\n    }, this.options.render.bundleRenderer))\n\n    // Promisify renderToString\n    this.bundleRenderer.renderToString = pify(this.bundleRenderer.renderToString)\n  }\n\n  useMiddleware (m) {\n    // Resolve\n    const $m = m\n    let src\n    if (typeof m === 'string') {\n      src = this.nuxt.resolvePath(m)\n      m = require(src)\n    }\n    if (typeof m.handler === 'string') {\n      src = this.nuxt.resolvePath(m.handler)\n      m.handler = require(src)\n    }\n\n    const handler = m.handler || m\n    const path = (((m.prefix !== false) ? this.options.router.base : '') + (m.path ? m.path : '')).replace(/\\/\\//g, '/')\n\n    // Inject $src and $m to final handler\n    if (src) handler.$src = src\n    handler.$m = $m\n\n    // Use middleware\n    this.app.use(path, handler)\n  }\n\n  get publicPath () {\n    return isUrl(this.options.build.publicPath) ? Options.defaults.build.publicPath : this.options.build.publicPath\n  }\n\n  async setupMiddleware () {\n    // Apply setupMiddleware from modules first\n    await this.applyPluginsAsync('setupMiddleware', this.app)\n\n    // Gzip middleware for production\n    if (!this.options.dev && this.options.render.gzip) {\n      this.useMiddleware(compression(this.options.render.gzip))\n    }\n\n    // Common URL checks\n    this.useMiddleware((req, res, next) => {\n      // Prevent access to SSR resources\n      if (ssrResourceRegex.test(req.url)) {\n        res.statusCode = 404\n        return res.end()\n      }\n      next()\n    })\n\n    // Add webpack middleware only for development\n    if (this.options.dev) {\n      this.useMiddleware(async (req, res, next) => {\n        if (this.webpackDevMiddleware) {\n          await this.webpackDevMiddleware(req, res)\n        }\n        if (this.webpackHotMiddleware) {\n          await this.webpackHotMiddleware(req, res)\n        }\n        next()\n      })\n    }\n\n    // open in editor for debug mode only\n    const _this = this\n    if (this.options.debug) {\n      this.useMiddleware({\n        path: '_open',\n        handler (req, res) {\n          // Lazy load open-in-editor\n          const openInEditor = require('open-in-editor')\n          const editor = openInEditor.configure(_this.options.editor)\n          // Parse Query\n          const query = req.url.split('?')[1].split('&').reduce((q, part) => {\n            const s = part.split('=')\n            q[s[0]] = decodeURIComponent(s[1])\n            return q\n          }, {})\n          // eslint-disable-next-line no-console\n          console.log('[open in editor]', query.file)\n          editor.open(query.file).then(() => {\n            res.end('opened in editor!')\n          }).catch(err => {\n            res.end(err)\n          })\n        }\n      })\n    }\n\n    // For serving static/ files to /\n    this.useMiddleware(serveStatic(resolve(this.options.srcDir, 'static'), this.options.render.static))\n\n    // Serve .nuxt/dist/ files only for production\n    // For dev they will be served with devMiddleware\n    if (!this.options.dev) {\n      const distDir = resolve(this.options.buildDir, 'dist')\n      this.useMiddleware({\n        path: this.publicPath,\n        handler: serveStatic(distDir, {\n          index: false, // Don't serve index.html template\n          maxAge: '1y' // 1 year in production\n        })\n      })\n    }\n\n    // Add User provided middleware\n    this.options.serverMiddleware.forEach(m => {\n      this.useMiddleware(m)\n    })\n\n    // Finally use nuxtMiddleware\n    this.useMiddleware(this.nuxtMiddleware.bind(this))\n\n    // Error middleware for errors that occurred in middleware that declared above\n    // Middleware should exactly take 4 arguments\n    // https://github.com/senchalabs/connect#error-middleware\n    this.useMiddleware(this.errorMiddleware.bind(this))\n  }\n\n  async nuxtMiddleware (req, res, next) {\n    // Get context\n    const context = getContext(req, res)\n    res.statusCode = 200\n    try {\n      const { html, error, redirected, resourceHints } = await this.renderRoute(req.url, context)\n      if (redirected) {\n        return html\n      }\n      if (error) {\n        res.statusCode = context.nuxt.error.statusCode || 500\n      }\n\n      // Add ETag header\n      if (!error && this.options.render.etag) {\n        const etag = generateETag(html, this.options.render.etag)\n        if (fresh(req.headers, { etag })) {\n          res.statusCode = 304\n          res.end()\n          return\n        }\n        res.setHeader('ETag', etag)\n      }\n\n      // HTTP2 push headers\n      if (!error && this.options.render.http2.push) {\n        // Parse resourceHints to extract HTTP.2 prefetch/push headers\n        // https://w3c.github.io/preload/#server-push-http-2\n        const regex = /link rel=\"([^\"]*)\" href=\"([^\"]*)\" as=\"([^\"]*)\"/g\n        const pushAssets = []\n        let m\n        while (m = regex.exec(resourceHints)) { // eslint-disable-line no-cond-assign\n          const [_, rel, href, as] = m // eslint-disable-line no-unused-vars\n          if (rel === 'preload') {\n            pushAssets.push(`<${href}>; rel=${rel}; as=${as}`)\n          }\n        }\n        // Pass with single Link header\n        // https://blog.cloudflare.com/http-2-server-push-with-multiple-assets-per-link-header\n        res.setHeader('Link', pushAssets.join(','))\n      }\n\n      // Send response\n      res.setHeader('Content-Type', 'text/html; charset=utf-8')\n      res.setHeader('Content-Length', Buffer.byteLength(html))\n      res.end(html, 'utf8')\n      return html\n    } catch (err) {\n      /* istanbul ignore if */\n      if (context && context.redirected) {\n        console.error(err) // eslint-disable-line no-console\n        return err\n      }\n\n      next(err)\n    }\n  }\n\n  errorMiddleware (err, req, res, next) {\n    // ensure statusCode, message and name fields\n    err.statusCode = err.statusCode || 500\n    err.message = err.message || 'Nuxt Server Error'\n    err.name = (!err.name || err.name === 'Error') ? 'NuxtServerError' : err.name\n\n    // We hide actual errors from end users, so show them on server logs\n    if (err.statusCode !== 404) {\n      console.error(err) // eslint-disable-line no-console\n    }\n\n    const sendResponse = (content, type = 'text/html') => {\n      // Set Headers\n      res.statusCode = err.statusCode\n      res.statusMessage = err.name\n      res.setHeader('Content-Type', type + '; charset=utf-8')\n      res.setHeader('Content-Length', Buffer.byteLength(content))\n\n      // Send Response\n      res.end(content, 'utf-8')\n    }\n\n    // Check if request accepts JSON\n    const hasReqHeader = (header, includes) => req.headers[header] && req.headers[header].toLowerCase().includes(includes)\n    const isJson = hasReqHeader('accept', 'application/json') || hasReqHeader('user-agent', 'curl/')\n\n    // Use basic errors when debug mode is disabled\n    if (!this.options.debug) {\n      // Json format is compatible with Youch json responses\n      const json = {\n        status: err.statusCode,\n        message: err.message,\n        name: err.name\n      }\n      if (isJson) {\n        sendResponse(JSON.stringify(json, undefined, 2), 'text/json')\n        return\n      }\n      const html = this.resources.errorTemplate(json)\n      sendResponse(html)\n      return\n    }\n\n    // Show stack trace\n    const youch = new Youch(err, req, this.readSource.bind(this))\n    if (isJson) {\n      youch.toJSON().then(json => { sendResponse(JSON.stringify(json, undefined, 2), 'text/json') })\n    } else {\n      youch.toHTML().then(html => { sendResponse(html) })\n    }\n  }\n\n  async readSource (frame) {\n    const serverBundle = this.resources.serverBundle\n\n    // Remove webpack:/// & query string from the end\n    const sanitizeName = name => name ? name.replace('webpack:///', '').split('?')[0] : ''\n\n    // SourceMap Support for SSR Bundle\n    if (serverBundle && serverBundle.maps[frame.fileName]) {\n      // Initialize smc cache\n      if (!serverBundle.$maps) {\n        serverBundle.$maps = {}\n      }\n\n      // Read SourceMap object\n      const smc = serverBundle.$maps[frame.fileName] || new SourceMapConsumer(serverBundle.maps[frame.fileName])\n      serverBundle.$maps[frame.fileName] = smc\n\n      // Try to find original position\n      const { line, column, name, source } = smc.originalPositionFor({\n        line: frame.getLineNumber() || 0,\n        column: frame.getColumnNumber() || 0\n      })\n      if (line) {\n        frame.lineNumber = line\n      }\n      if (column) {\n        frame.columnNumber = column\n      }\n      if (name) {\n        frame.functionName = name\n      }\n      if (source) {\n        frame.fileName = sanitizeName(source)\n\n        // Source detected, try to get original source code\n        const contents = smc.sourceContentFor(source)\n        if (contents) {\n          frame.contents = contents\n        }\n      }\n    }\n\n    // Return if fileName is still unknown\n    if (!frame.fileName) {\n      return\n    }\n\n    frame.fileName = sanitizeName(frame.fileName)\n\n    // Try to read from SSR bundle files\n    if (serverBundle && serverBundle.files[frame.fileName]) {\n      frame.contents = serverBundle.files[frame.fileName]\n      return\n    }\n\n    // Possible paths for file\n    const searchPath = [\n      this.options.rootDir,\n      join(this.options.buildDir, 'dist'),\n      this.options.srcDir,\n      this.options.buildDir\n    ]\n\n    // Scan filesystem for real path\n    for (let pathDir of searchPath) {\n      let fullPath = resolve(pathDir, frame.fileName)\n      let source = await fs.readFile(fullPath, 'utf-8').catch(() => null)\n      if (source) {\n        if (!frame.contents) {\n          frame.contents = source\n        }\n        frame.fullPath = fullPath\n        return\n      }\n    }\n  }\n\n  async renderRoute (url, context = {}) {\n    /* istanbul ignore if */\n    if (!this.isReady) {\n      return new Promise(resolve => {\n        setTimeout(() => resolve(this.renderRoute(url, context)), 1000)\n      })\n    }\n\n    // Log rendered url\n    debug(`Rendering url ${url}`)\n\n    // Add url and isSever to the context\n    context.url = url\n    context.isServer = true\n\n    // Basic response if SSR is disabled or spa data provided\n    const spa = context.spa || (context.res && context.res.spa)\n    if (this.noSSR || spa) {\n      const { HTML_ATTRS, BODY_ATTRS, HEAD, resourceHints } = await this.metaRenderer.render(context)\n      const APP = `<div id=\"__nuxt\">${this.resources.loadingHTML}</div>`\n\n      // Detect 404 errors\n      if (url.includes(this.options.build.publicPath) || url.includes('__webpack')) {\n        const err = { statusCode: 404, message: this.options.messages.error_404, name: 'ResourceNotFound' }\n        throw err\n      }\n\n      const data = {\n        HTML_ATTRS,\n        BODY_ATTRS,\n        HEAD,\n        APP\n      }\n\n      const html = this.resources.spaTemplate(data)\n\n      return { html, resourceHints }\n    }\n\n    // Call renderToString from the bundleRenderer and generate the HTML (will update the context as well)\n    let APP = await this.bundleRenderer.renderToString(context)\n\n    if (!context.nuxt.serverRendered) {\n      APP = '<div id=\"__nuxt\"></div>'\n    }\n    const m = context.meta.inject()\n    let HEAD = m.meta.text() + m.title.text() + m.link.text() + m.style.text() + m.script.text() + m.noscript.text()\n    if (this.options._routerBaseSpecified) {\n      HEAD += `<base href=\"${this.options.router.base}\">`\n    }\n\n    let resourceHints = ''\n\n    if (this.options.render.resourceHints) {\n      resourceHints = context.renderResourceHints()\n      HEAD += resourceHints\n    }\n    APP += `<script type=\"text/javascript\">window.__NUXT__=${serialize(context.nuxt, { isJSON: true })};</script>`\n    APP += context.renderScripts()\n\n    HEAD += context.renderStyles()\n\n    let html = this.resources.ssrTemplate({\n      HTML_ATTRS: 'data-n-head-ssr ' + m.htmlAttrs.text(),\n      BODY_ATTRS: m.bodyAttrs.text(),\n      HEAD,\n      APP\n    })\n\n    return {\n      html,\n      resourceHints,\n      error: context.nuxt.error,\n      redirected: context.redirected\n    }\n  }\n\n  async renderAndGetWindow (url, opts = {}) {\n    /* istanbul ignore if */\n    if (!jsdom) {\n      try {\n        jsdom = require('jsdom')\n      } catch (e) /* istanbul ignore next */ {\n        console.error('Fail when calling nuxt.renderAndGetWindow(url)') // eslint-disable-line no-console\n        console.error('jsdom module is not installed') // eslint-disable-line no-console\n        console.error('Please install jsdom with: npm install --save-dev jsdom') // eslint-disable-line no-console\n        throw e\n      }\n    }\n    let options = {\n      resources: 'usable', // load subresources (https://github.com/tmpvar/jsdom#loading-subresources)\n      runScripts: 'dangerously',\n      beforeParse (window) {\n        // Mock window.scrollTo\n        window.scrollTo = () => {\n        }\n      }\n    }\n    if (opts.virtualConsole !== false) {\n      options.virtualConsole = new jsdom.VirtualConsole().sendTo(console)\n    }\n    url = url || 'http://localhost:3000'\n    const { window } = await jsdom.JSDOM.fromURL(url, options)\n    // If Nuxt could not be loaded (error from the server-side)\n    const nuxtExists = window.document.body.innerHTML.includes(this.options.render.ssr ? 'window.__NUXT__' : '<div id=\"__nuxt\">')\n    /* istanbul ignore if */\n    if (!nuxtExists) {\n      let error = new Error('Could not load the nuxt app')\n      error.body = window.document.body.innerHTML\n      throw error\n    }\n    // Used by nuxt.js to say when the components are loaded and the app ready\n    await new Promise((resolve) => {\n      window._onNuxtLoaded = () => resolve(window)\n    })\n    // Send back window object\n    return window\n  }\n}\n\nconst parseTemplate = templateStr => _.template(templateStr, {\n  interpolate: /{{([\\s\\S]+?)}}/g\n})\n\nconst resourceMap = [\n  {\n    key: 'clientManifest',\n    fileName: 'vue-ssr-client-manifest.json',\n    transform: JSON.parse\n  },\n  {\n    key: 'serverBundle',\n    fileName: 'server-bundle.json',\n    transform: JSON.parse\n  },\n  {\n    key: 'ssrTemplate',\n    fileName: 'index.ssr.html',\n    transform: parseTemplate\n  },\n  {\n    key: 'spaTemplate',\n    fileName: 'index.spa.html',\n    transform: parseTemplate\n  }\n]\n\n// Protector utility against request to SSR bundle files\nconst ssrResourceRegex = new RegExp(resourceMap.map(resource => resource.fileName).join('|'), 'i')\n","import Tapable from 'tappable'\nimport chalk from 'chalk'\nimport { Options } from 'common'\nimport ModuleContainer from './module'\nimport Renderer from './renderer'\nimport Debug from 'debug'\nimport enableDestroy from 'server-destroy'\nimport Module from 'module'\nimport { join, resolve } from 'path'\n\nconst debug = Debug('nuxt:')\ndebug.color = 5\n\nexport default class Nuxt extends Tapable {\n  constructor (_options = {}) {\n    super()\n\n    this.options = Options.from(_options)\n\n    // Paths for resolving requires from `rootDir`\n    this.nodeModulePaths = Module._nodeModulePaths(this.options.rootDir)\n\n    this.initialized = false\n    this.errorHandler = this.errorHandler.bind(this)\n\n    // Create instance of core components\n    this.moduleContainer = new ModuleContainer(this)\n    this.renderer = new Renderer(this)\n\n    // Backward compatibility\n    this.render = this.renderer.app\n    this.renderRoute = this.renderer.renderRoute.bind(this.renderer)\n    this.renderAndGetWindow = this.renderer.renderAndGetWindow.bind(this.renderer)\n\n    // Default Show Open if Nuxt is not listening\n    this.showOpen = () => {}\n\n    this._ready = this.ready().catch(this.errorHandler)\n  }\n\n  async ready () {\n    if (this._ready) {\n      return this._ready\n    }\n\n    await this.moduleContainer._ready()\n    await this.applyPluginsAsync('ready')\n    await this.renderer._ready()\n\n    this.initialized = true\n    return this\n  }\n\n  listen (port = 3000, host = 'localhost') {\n    // Update showOpen\n    this.showOpen = () => {\n      const _host = host === '0.0.0.0' ? 'localhost' : host\n      // eslint-disable-next-line no-console\n      console.log('\\n' + chalk.bgGreen.black(' OPEN ') + chalk.green(` http://${_host}:${port}\\n`))\n    }\n\n    return new Promise((resolve, reject) => {\n      const server = this.renderer.app.listen({ port, host, exclusive: false }, err => {\n        /* istanbul ignore if */\n        if (err) {\n          return reject(err)\n        }\n\n        // Close server on nuxt close\n        this.plugin('close', () => new Promise((resolve, reject) => {\n          // Destroy server by forcing every connection to be closed\n          server.destroy(err => {\n            debug('server closed')\n            /* istanbul ignore if */\n            if (err) {\n              return reject(err)\n            }\n            resolve()\n          })\n        }))\n\n        resolve(this.applyPluginsAsync('listen', { server, port, host }))\n      })\n\n      // Add server.destroy(cb) method\n      enableDestroy(server)\n    })\n  }\n\n  errorHandler /* istanbul ignore next */() {\n    // Apply plugins\n    // eslint-disable-next-line no-console\n    this.applyPluginsAsync('error', ...arguments).catch(console.error)\n\n    // Silent\n    if (this.options.errorHandler === false) {\n      return\n    }\n\n    // Custom errorHandler\n    if (typeof this.options.errorHandler === 'function') {\n      return this.options.errorHandler.apply(this, arguments)\n    }\n\n    // Default handler\n    // eslint-disable-next-line no-console\n    console.error(...arguments)\n  }\n\n  resolvePath (path) {\n    // Try to resolve using NPM resolve path first\n    try {\n      let resolvedPath = Module._resolveFilename(path, { paths: this.nodeModulePaths })\n      return resolvedPath\n    } catch (e) {\n      // Just continue\n    }\n    // Shorthand to resolve from project dirs\n    if (path.indexOf('@@') === 0 || path.indexOf('~~') === 0) {\n      return join(this.options.rootDir, path.substr(2))\n    } else if (path.indexOf('@') === 0 || path.indexOf('~') === 0) {\n      return join(this.options.srcDir, path.substr(1))\n    }\n    return resolve(this.options.srcDir, path)\n  }\n\n  async close (callback) {\n    await this.applyPluginsAsync('close')\n\n    /* istanbul ignore if */\n    if (typeof callback === 'function') {\n      await callback()\n    }\n  }\n}\n","import ExtractTextPlugin from 'extract-text-webpack-plugin'\nimport { cloneDeep } from 'lodash'\nimport { join, resolve } from 'path'\nimport webpack from 'webpack'\nimport { isUrl, urlJoin } from 'utils'\n\n/*\n|--------------------------------------------------------------------------\n| Webpack Shared Config\n|\n| This is the config which is extended by the server and client\n| webpack config files\n|--------------------------------------------------------------------------\n*/\nexport default function webpackBaseConfig (name) {\n  const nodeModulesDir = join(__dirname, '..', 'node_modules')\n\n  const config = {\n    name,\n    devtool: this.options.dev ? 'cheap-module-source-map' : 'nosources-source-map',\n    entry: {\n      app: null\n    },\n    output: {\n      path: resolve(this.options.buildDir, 'dist'),\n      filename: this.options.build.filenames.app,\n      chunkFilename: this.options.build.filenames.chunk,\n      publicPath: (isUrl(this.options.build.publicPath)\n        ? this.options.build.publicPath\n        : urlJoin(this.options.router.base, this.options.build.publicPath))\n    },\n    performance: {\n      maxEntrypointSize: 1000000,\n      maxAssetSize: 300000,\n      hints: this.options.dev ? false : 'warning'\n    },\n    resolve: {\n      extensions: ['.js', '.json', '.vue', '.ts'],\n      alias: {\n        '~': join(this.options.srcDir),\n        '~~': join(this.options.rootDir),\n        '@': join(this.options.srcDir),\n        '@@': join(this.options.rootDir),\n\n        // Used by vue-loader so we can use in templates\n        // with <img src=\"~/assets/nuxt.png\" />\n        'assets': join(this.options.srcDir, 'assets'),\n        'static': join(this.options.srcDir, 'static')\n      },\n      modules: [\n        this.options.modulesDir,\n        nodeModulesDir\n      ]\n    },\n    resolveLoader: {\n      modules: [\n        this.options.modulesDir,\n        nodeModulesDir\n      ]\n    },\n    module: {\n      noParse: [/es6-promise\\.js$/, /(mapbox-gl)\\.js$/], // Avoid webpack shimming process\n      rules: [\n        {\n          test: /\\.vue$/,\n          loader: 'vue-loader',\n          options: this.vueLoader()\n        },\n        {\n          test: /\\.js$/,\n          loader: 'babel-loader',\n          exclude: /node_modules/,\n          options: Object.assign({}, this.babelOptions)\n        },\n        { test: /\\.css$/, use: this.styleLoader('css') },\n        { test: /\\.less$/, use: this.styleLoader('less', 'less-loader') },\n        { test: /\\.sass$/, use: this.styleLoader('sass', {loader: 'sass-loader', options: { indentedSyntax: true }}) },\n        { test: /\\.scss$/, use: this.styleLoader('scss', 'sass-loader') },\n        { test: /\\.styl(us)?$/, use: this.styleLoader('stylus', 'stylus-loader') },\n        {\n          test: /\\.(png|jpe?g|gif|svg)$/,\n          loader: 'url-loader',\n          options: {\n            limit: 1000, // 1KO\n            name: 'img/[name].[hash:7].[ext]'\n          }\n        },\n        {\n          test: /\\.(woff2?|eot|ttf|otf)(\\?.*)?$/,\n          loader: 'url-loader',\n          options: {\n            limit: 1000, // 1 KO\n            name: 'fonts/[name].[hash:7].[ext]'\n          }\n        },\n        {\n          test: /\\.(webm|mp4)$/,\n          loader: 'file-loader',\n          options: {\n            name: 'videos/[name].[hash:7].[ext]'\n          }\n        }\n      ]\n    },\n    plugins: this.options.build.plugins\n  }\n\n  // CSS extraction\n  if (this.options.build.extractCSS) {\n    config.plugins.push(new ExtractTextPlugin({\n      filename: this.options.build.filenames.css\n    }))\n  }\n\n  // Workaround for hiding Warnings about plugins without a default export (#1179)\n  config.plugins.push({\n    apply (compiler) {\n      compiler.plugin('done', stats => {\n        stats.compilation.warnings = stats.compilation.warnings.filter(warn => {\n          if (warn.name === 'ModuleDependencyWarning' && warn.message.includes(`export 'default'`) && warn.message.includes('plugin')) {\n            return false\n          }\n          return true\n        })\n      })\n    }\n  })\n\n  // --------------------------------------\n  // Dev specific config\n  // --------------------------------------\n  if (this.options.dev) {\n    //\n  }\n\n  // --------------------------------------\n  // Production specific config\n  // --------------------------------------\n  if (!this.options.dev) {\n    // This is needed in webpack 2 for minify CSS\n    config.plugins.push(\n      new webpack.LoaderOptionsPlugin({\n        minimize: true\n      })\n    )\n  }\n\n  // Clone deep avoid leaking config between Client and Server\n  return cloneDeep(config)\n}\n","import { each } from 'lodash'\nimport webpack from 'webpack'\nimport VueSSRClientPlugin from 'vue-server-renderer/client-plugin'\nimport HTMLPlugin from 'html-webpack-plugin'\nimport FriendlyErrorsWebpackPlugin from 'friendly-errors-webpack-plugin'\nimport ProgressBarPlugin from 'progress-bar-webpack-plugin'\nimport { BundleAnalyzerPlugin } from 'webpack-bundle-analyzer'\nimport { resolve } from 'path'\nimport { existsSync } from 'fs'\nimport Debug from 'debug'\nimport base from './base.config.js'\n\nconst debug = Debug('nuxt:build')\ndebug.color = 2 // Force green color\n\n/*\n|--------------------------------------------------------------------------\n| Webpack Client Config\n|\n| Generate public/dist/client-vendor-bundle.js\n| Generate public/dist/client-bundle.js\n|\n| In production, will generate public/dist/style.css\n|--------------------------------------------------------------------------\n*/\nexport default function webpackClientConfig () {\n  let config = base.call(this, 'client')\n\n  // App entry\n  config.entry.app = resolve(this.options.buildDir, 'client.js')\n  config.entry.common = this.vendor()\n\n  // Extract vendor chunks for better caching\n  const _this = this\n  const totalPages = _this.routes ? _this.routes.length : 0\n\n  // This well-known vendor may exist as a dependency of other requests.\n  const maybeVendor = [\n    '/core-js/',\n    '/regenerator-runtime/',\n    '/es6-promise/',\n    '/babel-runtime/',\n    '/lodash/'\n  ]\n\n  config.plugins.push(\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'common',\n      filename: this.options.build.filenames.vendor,\n      minChunks (module, count) {\n        // In the dev we use on-demand-entries.\n        // So, it makes no sense to use commonChunks based on the minChunks count.\n        // Instead, we move all the code in node_modules into each of the pages.\n        if (_this.options.dev) {\n          return false\n        }\n\n        // Detect and externalize well-known vendor if detected\n        if (module.context && maybeVendor.some(v => module.context.includes(v))) {\n          return true\n        }\n\n        // A module is extracted into the vendor chunk when...\n        return (\n          // If it's inside node_modules\n          /node_modules/.test(module.context) &&\n          // Do not externalize if the request is a CSS file\n          !/\\.(css|less|scss|sass|styl|stylus)$/.test(module.request) &&\n          // Used in at-least 1/2 of the total pages\n          (totalPages <= 2 ? count >= totalPages : count >= totalPages * 0.5)\n        )\n      }\n    })\n  )\n\n  // Env object defined in nuxt.config.js\n  let env = {}\n  each(this.options.env, (value, key) => {\n    env['process.env.' + key] = (['boolean', 'number'].indexOf(typeof value) !== -1 ? value : JSON.stringify(value))\n  })\n\n  // Webpack common plugins\n  /* istanbul ignore if */\n  if (!Array.isArray(config.plugins)) {\n    config.plugins = []\n  }\n\n  // Generate output HTML for SPA\n  config.plugins.push(\n    new HTMLPlugin({\n      filename: 'index.spa.html',\n      template: this.options.appTemplatePath,\n      inject: true,\n      chunksSortMode: 'dependency'\n    })\n  )\n\n  // Generate output HTML for SSR\n  if (this.options.build.ssr) {\n    config.plugins.push(\n      new HTMLPlugin({\n        filename: 'index.ssr.html',\n        template: this.options.appTemplatePath,\n        inject: false // Resources will be injected using bundleRenderer\n      })\n    )\n  }\n\n  // Generate vue-ssr-client-manifest\n  config.plugins.push(\n    new VueSSRClientPlugin({\n      filename: 'vue-ssr-client-manifest.json'\n    })\n  )\n\n  // Extract webpack runtime & manifest\n  config.plugins.push(\n    new webpack.optimize.CommonsChunkPlugin({\n      name: 'manifest',\n      minChunks: Infinity,\n      filename: this.options.build.filenames.manifest\n    })\n  )\n\n  // Define Env\n  config.plugins.push(\n    new webpack.DefinePlugin(Object.assign(env, {\n      'process.env.NODE_ENV': JSON.stringify(env.NODE_ENV || (this.options.dev ? 'development' : 'production')),\n      'process.env.VUE_ENV': JSON.stringify('client'),\n      'process.mode': JSON.stringify(this.options.mode),\n      'process.browser': true,\n      'process.server': false,\n      'process.static': this.isStatic\n    }))\n  )\n\n  // Build progress bar\n  config.plugins.push(\n    new ProgressBarPlugin()\n  )\n\n  // --------------------------------------\n  // Dev specific config\n  // --------------------------------------\n  if (this.options.dev) {\n    // Add friendly error plugin\n    config.plugins.push(new FriendlyErrorsWebpackPlugin())\n\n    // https://webpack.js.org/plugins/named-modules-plugin\n    config.plugins.push(new webpack.NamedModulesPlugin())\n\n    // Add HMR support\n    config.entry.app = [\n      // https://github.com/glenjamin/webpack-hot-middleware#config\n      `webpack-hot-middleware/client?name=client&reload=true&timeout=30000&path=${this.options.router.base}/__webpack_hmr`.replace(/\\/\\//g, '/'),\n      config.entry.app\n    ]\n    config.plugins.push(\n      new webpack.HotModuleReplacementPlugin(),\n      new webpack.NoEmitOnErrorsPlugin()\n    )\n\n    // DllReferencePlugin\n    // https://github.com/webpack/webpack/tree/master/examples/dll-user\n    if (this.options.build.dll) {\n      const _dlls = []\n      const vendorEntries = this.vendorEntries()\n      const dllDir = resolve(this.options.cacheDir, config.name + '-dll')\n      Object.keys(vendorEntries).forEach(v => {\n        const dllManifestFile = resolve(dllDir, v + '-manifest.json')\n        if (existsSync(dllManifestFile)) {\n          _dlls.push(v)\n          config.plugins.push(\n            new webpack.DllReferencePlugin({\n              // context: this.options.rootDir,\n              manifest: dllManifestFile // Using full path to allow finding .js dll file\n            })\n          )\n        }\n      })\n      if (_dlls.length) {\n        debug('Using dll for ' + _dlls.join(','))\n      }\n    }\n  }\n\n  // --------------------------------------\n  // Production specific config\n  // --------------------------------------\n  if (!this.options.dev) {\n    // Scope Hoisting\n    config.plugins.push(\n      // new webpack.optimize.ModuleConcatenationPlugin()\n    )\n\n    // https://webpack.js.org/plugins/hashed-module-ids-plugin\n    config.plugins.push(new webpack.HashedModuleIdsPlugin())\n\n    // Minify JS\n    // https://github.com/webpack-contrib/uglifyjs-webpack-plugin\n    config.plugins.push(\n      new webpack.optimize.UglifyJsPlugin({\n        sourceMap: true,\n        extractComments: {\n          filename: 'LICENSES'\n        },\n        compress: {\n          warnings: false\n        }\n      })\n    )\n\n    // Webpack Bundle Analyzer\n    if (this.options.build.analyze) {\n      config.plugins.push(\n        new BundleAnalyzerPlugin(Object.assign({}, this.options.build.analyze))\n      )\n    }\n  }\n\n  // Extend config\n  if (typeof this.options.build.extend === 'function') {\n    const extendedConfig = this.options.build.extend.call(this, config, {\n      dev: this.options.dev,\n      isClient: true\n    })\n    // Only overwrite config when something is returned for backwards compatibility\n    if (extendedConfig !== undefined) {\n      config = extendedConfig\n    }\n  }\n\n  return config\n}\n","import webpack from 'webpack'\nimport VueSSRServerPlugin from 'vue-server-renderer/server-plugin'\nimport nodeExternals from 'webpack-node-externals'\nimport { each } from 'lodash'\nimport { resolve } from 'path'\nimport { existsSync } from 'fs'\nimport base from './base.config.js'\n\n/*\n|--------------------------------------------------------------------------\n| Webpack Server Config\n|--------------------------------------------------------------------------\n*/\nexport default function webpackServerConfig () {\n  let config = base.call(this, 'server')\n\n  // env object defined in nuxt.config.js\n  let env = {}\n  each(this.options.env, (value, key) => {\n    env['process.env.' + key] = (['boolean', 'number'].indexOf(typeof value) !== -1 ? value : JSON.stringify(value))\n  })\n\n  config = Object.assign(config, {\n    target: 'node',\n    node: false,\n    devtool: 'source-map',\n    entry: resolve(this.options.buildDir, 'server.js'),\n    output: Object.assign({}, config.output, {\n      filename: 'server-bundle.js',\n      libraryTarget: 'commonjs2'\n    }),\n    performance: {\n      hints: false,\n      maxAssetSize: Infinity\n    },\n    externals: [],\n    plugins: (config.plugins || []).concat([\n      new VueSSRServerPlugin({\n        filename: 'server-bundle.json'\n      }),\n      new webpack.DefinePlugin(Object.assign(env, {\n        'process.env.NODE_ENV': JSON.stringify(env.NODE_ENV || (this.options.dev ? 'development' : 'production')),\n        'process.env.VUE_ENV': JSON.stringify('server'),\n        'process.mode': JSON.stringify(this.options.mode),\n        'process.browser': false,\n        'process.server': true,\n        'process.static': this.isStatic\n      }))\n    ])\n  })\n\n  // https://webpack.js.org/configuration/externals/#externals\n  // https://github.com/liady/webpack-node-externals\n  const moduleDirs = [\n    this.options.modulesDir\n    // Temporary disabled due to vue-server-renderer module search limitations\n    // resolve(__dirname, '..', 'node_modules')\n  ]\n  moduleDirs.forEach(dir => {\n    if (existsSync(dir)) {\n      config.externals.push(nodeExternals({\n        // load non-javascript files with extensions, presumably via loaders\n        whitelist: [/es6-promise|\\.(?!(?:js|json)$).{1,5}$/i],\n        modulesDir: dir\n      }))\n    }\n  })\n\n  // --------------------------------------\n  // Production specific config\n  // --------------------------------------\n  if (!this.options.dev) {\n\n  }\n\n  // Extend config\n  if (typeof this.options.build.extend === 'function') {\n    const extendedConfig = this.options.build.extend.call(this, config, {\n      dev: this.options.dev,\n      isServer: true\n    })\n    // Only overwrite config when something is returned for backwards compatibility\n    if (extendedConfig !== undefined) {\n      config = extendedConfig\n    }\n  }\n\n  return config\n}\n","import webpack from 'webpack'\nimport { resolve } from 'path'\nimport ClientConfig from './client.config'\n\n/*\n|--------------------------------------------------------------------------\n| Webpack Dll Config\n| https://github.com/webpack/webpack/tree/master/examples/dll\n|--------------------------------------------------------------------------\n*/\nexport default function webpackDllConfig (_refConfig) {\n  const refConfig = _refConfig || new ClientConfig()\n\n  const name = refConfig.name + '-dll'\n  const dllDir = resolve(this.options.cacheDir, name)\n\n  let config = {\n    name,\n    entry: this.vendorEntries(),\n    // context: this.options.rootDir,\n    resolve: refConfig.resolve,\n    target: refConfig.target,\n    resolveLoader: refConfig.resolveLoader,\n    module: refConfig.module,\n    plugins: []\n  }\n\n  config.output = {\n    path: dllDir,\n    filename: '[name]_[hash].js',\n    library: '[name]_[hash]'\n  }\n\n  config.plugins.push(\n    new webpack.DllPlugin({\n      // The path to the manifest file which maps between\n      // modules included in a bundle and the internal IDs\n      // within that bundle\n      path: resolve(dllDir, '[name]-manifest.json'),\n\n      name: '[name]_[hash]'\n    })\n  )\n\n  return config\n}\n","export default function vueLoader () {\n  // https://vue-loader.vuejs.org/en\n  const config = {\n    postcss: this.options.build.postcss,\n    extractCSS: this.options.build.extractCSS,\n    cssSourceMap: this.options.build.cssSourceMap,\n    preserveWhitespace: false,\n    loaders: {\n      'js': {\n        loader: 'babel-loader',\n        options: Object.assign({}, this.babelOptions)\n      },\n      // Note: do not nest the `postcss` option under `loaders`\n      'css': this.styleLoader('css', [], true),\n      'less': this.styleLoader('less', 'less-loader', true),\n      'scss': this.styleLoader('scss', 'sass-loader', true),\n      'sass': this.styleLoader('sass', {loader: 'sass-loader', options: { indentedSyntax: true }}, true),\n      'stylus': this.styleLoader('stylus', 'stylus-loader', true),\n      'styl': this.styleLoader('stylus', 'stylus-loader', true)\n    },\n    template: {\n      doctype: 'html' // For pug, see https://github.com/vuejs/vue-loader/issues/55\n    }\n  }\n\n  // Return the config\n  return config\n}\n","import ExtractTextPlugin from 'extract-text-webpack-plugin'\nimport { join } from 'path'\n\nexport default function styleLoader (ext, loaders = [], isVueLoader = false) {\n  // Normalize loaders\n  loaders = (Array.isArray(loaders) ? loaders : [loaders]).map(loader => {\n    if (typeof loader === 'string') {\n      loader = { loader }\n    }\n    return Object.assign({\n      options: {\n        sourceMap: this.options.build.cssSourceMap\n      }\n    }, loader)\n  })\n\n  // https://github.com/postcss/postcss-loader\n  let postcssLoader\n  if (!isVueLoader && this.options.build.postcss) {\n    postcssLoader = {\n      loader: 'postcss-loader',\n      options: this.options.build.postcss\n    }\n    if (postcssLoader.options === true) {\n      postcssLoader.options = {\n        sourceMap: this.options.build.cssSourceMap\n      }\n    }\n  }\n\n  // https://github.com/webpack-contrib/css-loader\n  const cssLoader = {\n    loader: 'css-loader',\n    options: {\n      minimize: true,\n      importLoaders: 1,\n      sourceMap: this.options.build.cssSourceMap,\n      alias: {\n        '/static': join(this.options.srcDir, 'static'),\n        '/assets': join(this.options.srcDir, 'assets')\n      }\n    }\n  }\n\n  // https://github.com/vuejs/vue-style-loader\n  const vueStyleLoader = {\n    loader: 'vue-style-loader',\n    options: {\n      sourceMap: this.options.build.cssSourceMap\n    }\n  }\n\n  if (this.options.build.extractCSS && !this.options.dev) {\n    return ExtractTextPlugin.extract({\n      fallback: vueStyleLoader,\n      use: [\n        cssLoader,\n        postcssLoader,\n        ...loaders\n      ].filter(l => l)\n    })\n  }\n\n  return [\n    vueStyleLoader,\n    cssLoader,\n    postcssLoader,\n    ...loaders\n  ].filter(l => l)\n}\n","import _ from 'lodash'\nimport chokidar from 'chokidar'\nimport fs, { remove, readFile, writeFile, mkdirp, utimes, existsSync } from 'fs-extra'\nimport hash from 'hash-sum'\nimport pify from 'pify'\nimport webpack from 'webpack'\nimport serialize from 'serialize-javascript'\nimport { join, resolve, basename, dirname } from 'path'\nimport Tapable from 'tappable'\nimport MFS from 'memory-fs'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\nimport webpackHotMiddleware from 'webpack-hot-middleware'\nimport { r, wp, wChunk, createRoutes, sequence, relativeTo, isPureObject } from 'utils'\nimport Debug from 'debug'\nimport Glob from 'glob'\nimport clientWebpackConfig from './webpack/client.config.js'\nimport serverWebpackConfig from './webpack/server.config.js'\nimport dllWebpackConfig from './webpack/dll.config.js'\nimport vueLoaderConfig from './webpack/vue-loader.config'\nimport styleLoader from './webpack/style-loader'\n\nconst debug = Debug('nuxt:build')\ndebug.color = 2 // Force green color\n\nconst glob = pify(Glob)\n\nexport default class Builder extends Tapable {\n  constructor (nuxt) {\n    super()\n    this.nuxt = nuxt\n    this.isStatic = false // Flag to know if the build is for a generated app\n    this.options = nuxt.options\n\n    // Fields that set on build\n    this.compiler = null\n    this.webpackDevMiddleware = null\n    this.webpackHotMiddleware = null\n\n    // Mute stats on dev\n    this.webpackStats = this.options.dev ? false : {\n      chunks: false,\n      children: false,\n      modules: false,\n      colors: true,\n      excludeAssets: [\n        /.map$/,\n        /index\\..+\\.html$/,\n        /vue-ssr-client-manifest.json/\n      ]\n    }\n\n    // Helper to resolve build paths\n    this.relativeToBuild = (...args) => relativeTo(this.options.buildDir, ...args)\n\n    // Bind styleLoader and vueLoader\n    this.styleLoader = styleLoader.bind(this)\n    this.vueLoader = vueLoaderConfig.bind(this)\n\n    this._buildStatus = STATUS.INITIAL\n  }\n\n  get plugins () {\n    return this.options.plugins.map((p, i) => {\n      if (typeof p === 'string') p = { src: p }\n      p.src = this.nuxt.resolvePath(p.src)\n      return { src: p.src, ssr: (p.ssr !== false), name: `plugin${i}` }\n    })\n  }\n\n  vendor () {\n    return [\n      'vue',\n      'vue-router',\n      'vue-meta',\n      this.options.store && 'vuex'\n    ].concat(this.options.build.vendor).filter(v => v)\n  }\n\n  vendorEntries () {\n    // Used for dll\n    const vendor = this.vendor()\n    const vendorEntries = {}\n    vendor.forEach(v => {\n      try {\n        require.resolve(v)\n        vendorEntries[v] = [ v ]\n      } catch (e) {\n        // Ignore\n      }\n    })\n    return vendorEntries\n  }\n\n  forGenerate () {\n    this.isStatic = true\n  }\n\n  async build () {\n    // Avoid calling build() method multiple times when dev:true\n    /* istanbul ignore if */\n    if (this._buildStatus === STATUS.BUILD_DONE && this.options.dev) {\n      return this\n    }\n    // If building\n    /* istanbul ignore if */\n    if (this._buildStatus === STATUS.BUILDING) {\n      return new Promise((resolve) => {\n        setTimeout(() => {\n          resolve(this.build())\n        }, 1000)\n      })\n    }\n    this._buildStatus = STATUS.BUILDING\n\n    // Wait for nuxt ready\n    await this.nuxt.ready()\n\n    // Wait for build plugins\n    await this.nuxt.applyPluginsAsync('build', this)\n\n    // Babel options\n    this.babelOptions = _.defaults(this.options.build.babel, {\n      babelrc: false,\n      cacheDirectory: !!this.options.dev\n    })\n    if (!this.babelOptions.babelrc && !this.babelOptions.presets) {\n      this.babelOptions.presets = [\n        require.resolve('babel-preset-vue-app')\n      ]\n    }\n\n    // Map postcss plugins into instances on object mode once\n    if (isPureObject(this.options.build.postcss)) {\n      if (isPureObject(this.options.build.postcss.plugins)) {\n        this.options.build.postcss.plugins = Object.keys(this.options.build.postcss.plugins)\n          .map(p => {\n            const plugin = require(p)\n            const opts = this.options.build.postcss.plugins[p]\n            if (opts === false) return // Disabled\n            const instance = plugin(opts)\n            return instance\n          }).filter(e => e)\n      }\n    }\n\n    // Check if pages dir exists and warn if not\n    this._nuxtPages = typeof this.options.build.createRoutes !== 'function'\n    if (this._nuxtPages) {\n      if (!fs.existsSync(join(this.options.srcDir, 'pages'))) {\n        let dir = this.options.srcDir\n        if (fs.existsSync(join(this.options.srcDir, '..', 'pages'))) {\n          throw new Error(`No \\`pages\\` directory found in ${dir}. Did you mean to run \\`nuxt\\` in the parent (\\`../\\`) directory?`)\n        } else {\n          throw new Error(`Couldn't find a \\`pages\\` directory in ${dir}. Please create one under the project root`)\n        }\n      }\n    }\n\n    debug(`App root: ${this.options.srcDir}`)\n    debug(`Generating ${this.options.buildDir} files...`)\n\n    // Create .nuxt/, .nuxt/components and .nuxt/dist folders\n    await remove(r(this.options.buildDir))\n    await mkdirp(r(this.options.buildDir, 'components'))\n    if (!this.options.dev) {\n      await mkdirp(r(this.options.buildDir, 'dist'))\n    }\n\n    // Generate routes and interpret the template files\n    await this.generateRoutesAndFiles()\n\n    // Start webpack build\n    await this.webpackBuild()\n\n    await this.applyPluginsAsync('built', this)\n\n    // Flag to set that building is done\n    this._buildStatus = STATUS.BUILD_DONE\n\n    return this\n  }\n\n  async generateRoutesAndFiles () {\n    debug('Generating files...')\n    // -- Templates --\n    let templatesFiles = [\n      'App.vue',\n      'client.js',\n      'index.js',\n      'middleware.js',\n      'router.js',\n      'server.js',\n      'utils.js',\n      'empty.js',\n      'components/nuxt-error.vue',\n      'components/nuxt-loading.vue',\n      'components/nuxt-child.js',\n      'components/nuxt-link.js',\n      'components/nuxt.vue',\n      'components/no-ssr.js',\n      'views/app.template.html',\n      'views/error.html'\n    ]\n    const templateVars = {\n      options: this.options,\n      messages: this.options.messages,\n      uniqBy: _.uniqBy,\n      isDev: this.options.dev,\n      debug: this.options.debug,\n      mode: this.options.mode,\n      router: this.options.router,\n      env: this.options.env,\n      head: this.options.head,\n      middleware: fs.existsSync(join(this.options.srcDir, 'middleware')),\n      store: this.options.store,\n      css: this.options.css,\n      plugins: this.plugins,\n      appPath: './App.vue',\n      layouts: Object.assign({}, this.options.layouts),\n      loading: typeof this.options.loading === 'string' ? this.relativeToBuild(this.options.srcDir, this.options.loading) : this.options.loading,\n      transition: this.options.transition,\n      layoutTransition: this.options.layoutTransition,\n      components: {\n        ErrorPage: this.options.ErrorPage ? this.relativeToBuild(this.options.ErrorPage) : null\n      }\n    }\n\n    // -- Layouts --\n    if (fs.existsSync(resolve(this.options.srcDir, 'layouts'))) {\n      const layoutsFiles = await glob('layouts/*.vue', { cwd: this.options.srcDir })\n      let hasErrorLayout = false\n      layoutsFiles.forEach((file) => {\n        let name = file.split('/').slice(-1)[0].replace(/\\.vue$/, '')\n        if (name === 'error') {\n          hasErrorLayout = true\n          return\n        }\n        templateVars.layouts[name] = this.relativeToBuild(this.options.srcDir, file)\n      })\n      if (!templateVars.components.ErrorPage && hasErrorLayout) {\n        templateVars.components.ErrorPage = this.relativeToBuild(this.options.srcDir, 'layouts/error.vue')\n      }\n    }\n    // If no default layout, create its folder and add the default folder\n    if (!templateVars.layouts.default) {\n      await mkdirp(r(this.options.buildDir, 'layouts'))\n      templatesFiles.push('layouts/default.vue')\n      templateVars.layouts.default = './layouts/default.vue'\n    }\n\n    // -- Routes --\n    debug('Generating routes...')\n    // If user defined a custom method to create routes\n    if (this._nuxtPages) {\n      // Use nuxt.js createRoutes bases on pages/\n      const files = await glob('pages/**/*.vue', { cwd: this.options.srcDir })\n      templateVars.router.routes = createRoutes(files, this.options.srcDir)\n    } else {\n      templateVars.router.routes = this.options.build.createRoutes(this.options.srcDir)\n    }\n\n    await this.applyPluginsAsync('extendRoutes', { routes: templateVars.router.routes, templateVars, r })\n\n    // router.extendRoutes method\n    if (typeof this.options.router.extendRoutes === 'function') {\n      // let the user extend the routes\n      const extendedRoutes = this.options.router.extendRoutes(templateVars.router.routes, r)\n      // Only overwrite routes when something is returned for backwards compatibility\n      if (extendedRoutes !== undefined) {\n        templateVars.router.routes = extendedRoutes\n      }\n    }\n\n    // Make routes accessible for other modules and webpack configs\n    this.routes = templateVars.router.routes\n\n    // -- Store --\n    // Add store if needed\n    if (this.options.store) {\n      templatesFiles.push('store.js')\n    }\n\n    // Resolve template files\n    const customTemplateFiles = this.options.build.templates.map(t => t.dst || basename(t.src || t))\n\n    templatesFiles = templatesFiles.map(file => {\n      // Skip if custom file was already provided in build.templates[]\n      if (customTemplateFiles.indexOf(file) !== -1) {\n        return\n      }\n      // Allow override templates using a file with same name in ${srcDir}/app\n      const customPath = r(this.options.srcDir, 'app', file)\n      const customFileExists = fs.existsSync(customPath)\n\n      return {\n        src: customFileExists\n          ? customPath\n          : r(this.options.nuxtAppDir, file),\n        dst: file,\n        custom: customFileExists\n      }\n    }).filter(i => !!i)\n\n    // -- Custom templates --\n    // Add custom template files\n    templatesFiles = templatesFiles.concat(this.options.build.templates.map(t => {\n      return Object.assign({\n        src: r(this.options.srcDir, t.src || t),\n        dst: t.dst || basename(t.src || t),\n        custom: true\n      }, t)\n    }))\n\n    // -- Loading indicator --\n    if (this.options.loadingIndicator.name) {\n      const indicatorPath1 = resolve(this.options.nuxtAppDir, 'views/loading', this.options.loadingIndicator.name + '.html')\n      const indicatorPath2 = this.nuxt.resolvePath(this.options.loadingIndicator.name)\n      const indicatorPath = existsSync(indicatorPath1) ? indicatorPath1 : (existsSync(indicatorPath2) ? indicatorPath2 : null)\n      if (indicatorPath) {\n        templatesFiles.push({\n          src: indicatorPath,\n          dst: 'loading.html',\n          options: this.options.loadingIndicator\n        })\n      } else {\n        console.error(`Could not fetch loading indicator: ${this.options.loadingIndicator.name}`) // eslint-disable-line no-console\n      }\n    }\n\n    await this.applyPluginsAsync('generate', { builder: this, templatesFiles, templateVars })\n\n    // Interpret and move template files to .nuxt/\n    await Promise.all(templatesFiles.map(async ({ src, dst, options, custom }) => {\n      // Add template to watchers\n      this.options.build.watch.push(src)\n      // Render template to dst\n      const fileContent = await readFile(src, 'utf8')\n      const template = _.template(fileContent, {\n        imports: {\n          serialize,\n          hash,\n          r,\n          wp,\n          wChunk,\n          resolvePath: this.nuxt.resolvePath.bind(this.nuxt),\n          relativeToBuild: this.relativeToBuild\n        }\n      })\n      const content = template(Object.assign({}, templateVars, {\n        options: options || {},\n        custom,\n        src,\n        dst\n      }))\n      const path = r(this.options.buildDir, dst)\n      // Ensure parent dir exits\n      await mkdirp(dirname(path))\n      // Write file\n      await writeFile(path, content, 'utf8')\n      // Fix webpack loop (https://github.com/webpack/watchpack/issues/25#issuecomment-287789288)\n      const dateFS = Date.now() / 1000 - 1000\n      return utimes(path, dateFS, dateFS)\n    }))\n\n    await this.applyPluginsAsync('generated', this)\n  }\n\n  async webpackBuild () {\n    debug('Building files...')\n    const compilersOptions = []\n\n    // Client\n    const clientConfig = clientWebpackConfig.call(this)\n    compilersOptions.push(clientConfig)\n\n    // Server\n    let serverConfig = null\n    if (this.options.build.ssr) {\n      serverConfig = serverWebpackConfig.call(this)\n      compilersOptions.push(serverConfig)\n    }\n\n    // Alias plugins to their real path\n    this.plugins.forEach(p => {\n      const src = this.relativeToBuild(p.src)\n\n      // Client config\n      if (!clientConfig.resolve.alias[p.name]) {\n        clientConfig.resolve.alias[p.name] = src\n      }\n\n      // Server config\n      if (serverConfig && !serverConfig.resolve.alias[p.name]) {\n        // Alias to noop for ssr:false plugins\n        serverConfig.resolve.alias[p.name] = p.ssr ? src : './empty.js'\n      }\n    })\n\n    // Make a dll plugin after compile to make next dev builds faster\n    if (this.options.build.dll && this.options.dev) {\n      compilersOptions.push(dllWebpackConfig.call(this, clientConfig))\n    }\n\n    // Simulate webpack multi compiler interface\n    // Separate compilers are simpler, safer and faster\n    this.compiler = { compilers: [] }\n    this.compiler.plugin = (...args) => {\n      this.compiler.compilers.forEach(compiler => {\n        compiler.plugin(...args)\n      })\n    }\n\n    // Initialize shared FS and Cache\n    const sharedFS = this.options.dev && new MFS()\n    const sharedCache = {}\n\n    // Initialize compilers\n    compilersOptions.forEach(compilersOption => {\n      const compiler = webpack(compilersOption)\n      if (sharedFS && !compiler.name.includes('-dll')) {\n        compiler.outputFileSystem = sharedFS\n      }\n      compiler.cache = sharedCache\n      this.compiler.compilers.push(compiler)\n    })\n\n    // Access to compilers with name\n    this.compiler.compilers.forEach(compiler => {\n      if (compiler.name) {\n        this.compiler[compiler.name] = compiler\n      }\n    })\n\n    // Run after each compile\n    this.compiler.plugin('done', async stats => {\n      // Don't reload failed builds\n      /* istanbul ignore if */\n      if (stats.hasErrors()) {\n        return\n      }\n\n      // console.log(stats.toString({ chunks: true }))\n\n      // Reload renderer if available\n      if (this.nuxt.renderer) {\n        this.nuxt.renderer.loadResources(sharedFS || fs)\n      }\n\n      await this.applyPluginsAsync('done', { builder: this, stats })\n    })\n\n    // Add dev Stuff\n    if (this.options.dev) {\n      this.webpackDev()\n    }\n\n    await this.applyPluginsAsync('compile', { builder: this, compiler: this.compiler })\n\n    // Start Builds\n    await sequence(this.compiler.compilers, compiler => new Promise((resolve, reject) => {\n      if (this.options.dev) {\n        // --- Dev Build ---\n        if (compiler.options.name === 'client') {\n          // Client watch is started by dev-middleware\n          resolve()\n        } else if (compiler.options.name.includes('-dll')) {\n          // DLL builds should run once\n          compiler.run((err, stats) => {\n            if (err) {\n              return reject(err)\n            }\n            debug('[DLL] updated')\n            resolve()\n          })\n        } else {\n          // Build and watch for changes\n          compiler.watch(this.options.watchers.webpack, (err) => {\n            /* istanbul ignore if */\n            if (err) {\n              return reject(err)\n            }\n            resolve()\n          })\n        }\n      } else {\n        // --- Production Build ---\n        compiler.run((err, stats) => {\n          /* istanbul ignore if */\n          if (err) {\n            console.error(err) // eslint-disable-line no-console\n            return reject(err)\n          }\n\n          // Show build stats for production\n          console.log(stats.toString(this.webpackStats)) // eslint-disable-line no-console\n\n          /* istanbul ignore if */\n          if (stats.hasErrors()) {\n            return reject(new Error('Webpack build exited with errors'))\n          }\n          resolve()\n        })\n      }\n    }))\n\n    await this.applyPluginsAsync('compiled', this)\n  }\n\n  webpackDev () {\n    debug('Adding webpack middleware...')\n\n    // Create webpack dev middleware\n    this.webpackDevMiddleware = pify(webpackDevMiddleware(this.compiler.client, Object.assign({\n      publicPath: this.options.build.publicPath,\n      stats: this.webpackStats,\n      noInfo: true,\n      quiet: true,\n      watchOptions: this.options.watchers.webpack\n    }, this.options.build.devMiddleware)))\n\n    this.webpackHotMiddleware = pify(webpackHotMiddleware(this.compiler.client, Object.assign({\n      log: false,\n      heartbeat: 10000\n    }, this.options.build.hotMiddleware)))\n\n    // Inject to renderer instance\n    if (this.nuxt.renderer) {\n      this.nuxt.renderer.webpackDevMiddleware = this.webpackDevMiddleware\n      this.nuxt.renderer.webpackHotMiddleware = this.webpackHotMiddleware\n    }\n\n    // Stop webpack middleware on nuxt.close()\n    this.nuxt.plugin('close', () => new Promise(resolve => {\n      this.webpackDevMiddleware.close(() => resolve())\n    }))\n\n    // Start watching files\n    this.watchFiles()\n  }\n\n  watchFiles () {\n    const patterns = [\n      r(this.options.srcDir, 'layouts'),\n      r(this.options.srcDir, 'store'),\n      r(this.options.srcDir, 'middleware'),\n      r(this.options.srcDir, 'layouts/*.vue'),\n      r(this.options.srcDir, 'layouts/**/*.vue')\n    ]\n    if (this._nuxtPages) {\n      patterns.push(r(this.options.srcDir, 'pages'))\n      patterns.push(r(this.options.srcDir, 'pages/*.vue'))\n      patterns.push(r(this.options.srcDir, 'pages/**/*.vue'))\n    }\n    const options = Object.assign({}, this.options.watchers.chokidar, {\n      ignoreInitial: true\n    })\n    /* istanbul ignore next */\n    const refreshFiles = _.debounce(() => this.generateRoutesAndFiles(), 200)\n\n    // Watch for src Files\n    let filesWatcher = chokidar.watch(patterns, options)\n      .on('add', refreshFiles)\n      .on('unlink', refreshFiles)\n\n    // Watch for custom provided files\n    let customFilesWatcher = chokidar.watch(_.uniq(this.options.build.watch), options)\n      .on('change', refreshFiles)\n\n    // Stop watching on nuxt.close()\n    this.nuxt.plugin('close', () => {\n      filesWatcher.close()\n      customFilesWatcher.close()\n    })\n  }\n}\n\nconst STATUS = {\n  INITIAL: 1,\n  BUILD_DONE: 2,\n  BUILDING: 3\n}\n","import { copy, remove, writeFile, mkdirp, removeSync, existsSync } from 'fs-extra'\nimport _ from 'lodash'\nimport { resolve, join, dirname, sep } from 'path'\nimport { minify } from 'html-minifier'\nimport Tapable from 'tappable'\nimport { isUrl, promisifyRoute, waitFor, flatRoutes } from 'utils'\nimport Debug from 'debug'\n\nconst debug = Debug('nuxt:generate')\n\nexport default class Generator extends Tapable {\n  constructor (nuxt, builder) {\n    super()\n    this.nuxt = nuxt\n    this.options = nuxt.options\n    this.builder = builder\n\n    // Set variables\n    this.generateRoutes = resolve(this.options.srcDir, 'static')\n    this.srcBuiltPath = resolve(this.options.buildDir, 'dist')\n    this.distPath = resolve(this.options.rootDir, this.options.generate.dir)\n    this.distNuxtPath = join(this.distPath, (isUrl(this.options.build.publicPath) ? '' : this.options.build.publicPath))\n  }\n\n  async generate ({ build = true, init = true } = {}) {\n    const s = Date.now()\n    let errors = []\n\n    // Add flag to set process.static\n    this.builder.forGenerate()\n\n    // Wait for nuxt be ready\n    await this.nuxt.ready()\n\n    // Start build process\n    if (build) {\n      await this.builder.build()\n    }\n\n    await this.nuxt.applyPluginsAsync('generator', this)\n\n    // Initialize dist directory\n    if (init) {\n      await this.initDist()\n    }\n\n    // Resolve config.generate.routes promises before generating the routes\n    let generateRoutes = []\n    if (this.options.router.mode !== 'hash') {\n      try {\n        console.log('Generating routes') // eslint-disable-line no-console\n        generateRoutes = await promisifyRoute(this.options.generate.routes || [])\n        await this.applyPluginsAsync('generateRoutes', { generator: this, generateRoutes })\n      } catch (e) {\n        console.error('Could not resolve routes') // eslint-disable-line no-console\n        console.error(e) // eslint-disable-line no-console\n        throw e // eslint-disable-line no-unreachable\n      }\n    }\n\n    // Generate only index.html for router.mode = 'hash'\n    let routes = (this.options.router.mode === 'hash') ? ['/'] : flatRoutes(this.options.router.routes)\n    routes = this.decorateWithPayloads(routes, generateRoutes)\n\n    await this.applyPluginsAsync('generate', { generator: this, routes })\n\n    // Start generate process\n    while (routes.length) {\n      let n = 0\n      await Promise.all(routes.splice(0, this.options.generate.concurrency).map(async ({ route, payload }) => {\n        await waitFor(n++ * this.options.generate.interval)\n        await this.generateRoute({ route, payload, errors })\n      }))\n    }\n\n    // Copy /index.html to /200.html for surge SPA\n    // https://surge.sh/help/adding-a-200-page-for-client-side-routing\n    const _200Path = join(this.distPath, '200.html')\n    if (!existsSync(_200Path)) {\n      await copy(join(this.distPath, 'index.html'), _200Path)\n    }\n\n    const duration = Math.round((Date.now() - s) / 100) / 10\n    debug(`HTML Files generated in ${duration}s`)\n\n    if (errors.length) {\n      const report = errors.map(({ type, route, error }) => {\n        /* istanbul ignore if */\n        if (type === 'unhandled') {\n          return `Route: '${route}'\\n${error.stack}`\n        } else {\n          return `Route: '${route}' thrown an error: \\n` + JSON.stringify(error)\n        }\n      })\n      console.error('==== Error report ==== \\n' + report.join('\\n\\n')) // eslint-disable-line no-console\n    }\n\n    await this.applyPluginsAsync('generated', this)\n\n    return { duration, errors }\n  }\n\n  async initDist () {\n    // Clean destination folder\n    await remove(this.distPath)\n    debug('Destination folder cleaned')\n\n    // Copy static and built files\n    /* istanbul ignore if */\n    if (existsSync(this.generateRoutes)) {\n      await copy(this.generateRoutes, this.distPath)\n    }\n    await copy(this.srcBuiltPath, this.distNuxtPath)\n\n    // Add .nojekyll file to let Github Pages add the _nuxt/ folder\n    // https://help.github.com/articles/files-that-start-with-an-underscore-are-missing/\n    const nojekyllPath = resolve(this.distPath, '.nojekyll')\n    writeFile(nojekyllPath, '')\n\n    // Cleanup SSR related files\n    const extraFiles = [\n      'index.spa.html',\n      'index.ssr.html',\n      'server-bundle.json',\n      'vue-ssr-client-manifest.json'\n    ].map(file => resolve(this.distNuxtPath, file))\n\n    extraFiles.forEach(file => {\n      if (existsSync(file)) {\n        removeSync(file)\n      }\n    })\n\n    debug('Static & build files copied')\n  }\n\n  decorateWithPayloads (routes, generateRoutes) {\n    let routeMap = {}\n    // Fill routeMap for known routes\n    routes.forEach((route) => {\n      routeMap[route] = {\n        route,\n        payload: null\n      }\n    })\n    // Fill routeMap with given generate.routes\n    generateRoutes.forEach((route) => {\n      // route is either a string or like {route : \"/my_route/1\"}\n      const path = _.isString(route) ? route : route.route\n      routeMap[path] = {\n        route: path,\n        payload: route.payload || null\n      }\n    })\n    return _.values(routeMap)\n  }\n\n  async generateRoute ({ route, payload = {}, errors = [] }) {\n    let html\n\n    try {\n      const res = await this.nuxt.renderer.renderRoute(route, { _generate: true, payload })\n      html = res.html\n      if (res.error) {\n        errors.push({ type: 'handled', route, error: res.error })\n      }\n    } catch (err) {\n      /* istanbul ignore next */\n      return errors.push({ type: 'unhandled', route, error: err })\n    }\n\n    if (this.options.generate.minify) {\n      try {\n        html = minify(html, this.options.generate.minify)\n      } catch (err) /* istanbul ignore next */ {\n        const minifyErr = new Error(`HTML minification failed. Make sure the route generates valid HTML. Failed HTML:\\n ${html}`)\n        errors.push({ type: 'unhandled', route, error: minifyErr })\n      }\n    }\n\n    let path = join(route, sep, 'index.html') // /about -> /about/index.html\n    path = (path === '/404/index.html') ? '/404.html' : path // /404 -> /404.html\n    debug('Generate file: ' + path)\n    path = join(this.distPath, path)\n\n    // Make sure the sub folders are created\n    await mkdirp(dirname(path))\n    await writeFile(path, html, 'utf8')\n\n    return true\n  }\n}\n","import * as core from './core'\nimport * as builder from './builder'\n\nexport default Object.assign({}, core, builder)\n"],"names":["encodeHtml","str","replace","getContext","req","res","setAnsiColors","ansiHTML","setColors","ms","Promise","resolve","waitFor","urlJoin","slice","call","arguments","join","isUrl","url","indexOf","promisifyRoute","fn","Array","isArray","length","reject","err","routeParams","promise","then","sequence","tasks","reduce","task","parallel","all","map","chainFn","base","Function","apply","baseResult","undefined","fnResult","prototype","isPureObject","o","isWindows","test","process","platform","wp","p","wChunk","reqSep","sysSep","_","escapeRegExp","sep","normalize","string","r","args","lastArg","last","includes","relativeTo","dir","shift","path","rp","relative","flatRoutes","router","routes","forEach","children","push","cleanChildrenRoutes","isChild","start","routesIndex","route","name","split","s","names","paths","i","a","find","child","createRoutes","files","srcDir","file","keys","component","parent","key","chunkName","sort","b","y","z","_a","_b","Options","from","_options","options","Object","assign","loading","middleware","_routerBaseSpecified","transition","layoutTransition","defaultsDeep","defaults","hasValue","v","rootDir","cwd","modulesDir","buildDir","cacheDir","appTemplatePath","existsSync","dev","build","publicPath","store","loadingIndicator","cssSourceMap","postcss","postcssConfigExists","plugins","debug","modePreset","modes","mode","render","ssr","appear","env","NODE_ENV","__dirname","Debug","ModuleContainer","Tapable","nuxt","requiredModules","modules","addModule","bind","applyPluginsAsync","vendor","uniq","concat","template","src","srcPath","parse","fs","dst","fileName","basename","hash","ext","templateObj","templates","addTemplate","unshift","serverMiddleware","extend","extendRoutes","moduleOpts","requireOnce","originalSrc","module","require","resolvePath","Error","JSON","stringify","meta","alreadyRequired","result","MetaRenderer","renderer","vueRenderer","VueServerRenderer","createRenderer","cache","LRU","use","VueMeta","vm","Vue","h","head","renderToString","$meta","inject","get","m","getMeta","HTML_ATTRS","htmlAttrs","text","BODY_ATTRS","bodyAttrs","HEAD","title","link","style","script","noscript","resourceHints","clientManifest","resources","initial","async","set","color","jsdom","Renderer","bundleRenderer","metaRenderer","webpackDevMiddleware","webpackHotMiddleware","app","connect","parseTemplate","setupMiddleware","loadResources","_fs","distPath","updated","transform","rawKey","rawData","data","readFileSync","errorTemplatePath","errorTemplate","loadingHTMLPath","loadingHTML","noSSR","isReady","Boolean","spaTemplate","ssrTemplate","isResourcesAvailable","serverBundle","showOpen","createBundleRenderer","pify","$m","handler","prefix","$src","gzip","useMiddleware","compression","next","ssrResourceRegex","statusCode","end","_this","openInEditor","editor","configure","query","q","part","decodeURIComponent","log","open","catch","serveStatic","static","distDir","nuxtMiddleware","errorMiddleware","context","html","error","redirected","renderRoute","etag","generateETag","fresh","headers","setHeader","http2","regex","pushAssets","exec","rel","href","as","Buffer","byteLength","message","sendResponse","content","type","statusMessage","hasReqHeader","header","toLowerCase","isJson","json","youch","Youch","readSource","toJSON","toHTML","frame","sanitizeName","maps","$maps","smc","SourceMapConsumer","line","column","source","originalPositionFor","getLineNumber","getColumnNumber","lineNumber","columnNumber","functionName","contents","sourceContentFor","searchPath","pathDir","fullPath","readFile","isServer","spa","APP","messages","error_404","serverRendered","renderResourceHints","serialize","isJSON","renderScripts","renderStyles","opts","e","window","scrollTo","virtualConsole","VirtualConsole","sendTo","console","JSDOM","fromURL","nuxtExists","document","body","innerHTML","_onNuxtLoaded","templateStr","resourceMap","RegExp","resource","Nuxt","nodeModulePaths","Module","_nodeModulePaths","initialized","errorHandler","moduleContainer","renderAndGetWindow","_ready","ready","port","host","_host","chalk","bgGreen","black","green","server","listen","exclusive","plugin","destroy","resolvedPath","_resolveFilename","substr","callback","webpackBaseConfig","nodeModulesDir","config","filenames","chunk","vueLoader","babelOptions","styleLoader","loader","indentedSyntax","extractCSS","ExtractTextPlugin","css","compiler","stats","compilation","warnings","filter","warn","webpack","LoaderOptionsPlugin","cloneDeep","webpackClientConfig","entry","common","totalPages","maybeVendor","optimize","CommonsChunkPlugin","count","some","request","value","HTMLPlugin","VueSSRClientPlugin","Infinity","manifest","DefinePlugin","isStatic","ProgressBarPlugin","FriendlyErrorsWebpackPlugin","NamedModulesPlugin","HotModuleReplacementPlugin","NoEmitOnErrorsPlugin","dll","_dlls","vendorEntries","dllDir","dllManifestFile","DllReferencePlugin","HashedModuleIdsPlugin","UglifyJsPlugin","analyze","BundleAnalyzerPlugin","extendedConfig","webpackServerConfig","output","VueSSRServerPlugin","moduleDirs","externals","nodeExternals","webpackDllConfig","_refConfig","refConfig","ClientConfig","target","resolveLoader","DllPlugin","loaders","isVueLoader","postcssLoader","cssLoader","vueStyleLoader","extract","l","glob","Glob","Builder","webpackStats","relativeToBuild","vueLoaderConfig","_buildStatus","STATUS","INITIAL","BUILD_DONE","BUILDING","babel","babelrc","presets","instance","_nuxtPages","remove","mkdirp","generateRoutesAndFiles","webpackBuild","templatesFiles","templateVars","uniqBy","layouts","ErrorPage","layoutsFiles","hasErrorLayout","components","default","extendedRoutes","customTemplateFiles","t","customPath","customFileExists","nuxtAppDir","indicatorPath1","indicatorPath2","indicatorPath","builder","custom","watch","fileContent","dirname","writeFile","dateFS","Date","now","utimes","compilersOptions","clientConfig","clientWebpackConfig","serverConfig","serverWebpackConfig","alias","dllWebpackConfig","compilers","sharedFS","MFS","sharedCache","compilersOption","outputFileSystem","hasErrors","webpackDev","run","watchers","toString","client","devMiddleware","hotMiddleware","close","watchFiles","patterns","chokidar","refreshFiles","debounce","filesWatcher","on","customFilesWatcher","Generator","generateRoutes","srcBuiltPath","generate","distNuxtPath","init","errors","forGenerate","initDist","generator","decorateWithPayloads","n","splice","concurrency","payload","interval","generateRoute","_200Path","copy","duration","Math","round","report","stack","nojekyllPath","extraFiles","routeMap","isString","values","_generate","minify","minifyErr","core"],"mappings":"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"}